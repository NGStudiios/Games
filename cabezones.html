<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Juego de Fútbol</title>
<style>
  html, body {
    margin: 0;
    padding: 0;
    overflow: hidden;
    height: 100%;
    background: #3cba54;
    font-family: Arial, sans-serif;
  }
  #gameCanvas {
    background: #3cba54;
    display: block;
    margin: auto;
    position: relative;
  }
  #hud {
    position: absolute;
    width: 100%;
    top: 0;
    text-align: center;
    color: white;
    font-size: 24px;
    z-index: 10;
  }
</style>
</head>
<body>

<div id="hud">
  <span id="score1">0</span> - <span id="score2">0</span> | Tiempo: <span id="timer">60</span>s
</div>
<canvas id="gameCanvas" width="400" height="700"></canvas>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

let score1 = 0;
let score2 = 0;
let timer = 60;

// Jugadores
const player1 = {x: 150, y: 650, width: 80, height: 20, color: 'blue'};
const player2 = {x: 150, y: 30, width: 80, height: 20, color: 'red'};

// Pelota
const ball = {x: 200, y: 350, radius: 15, color: 'white', dx: 3, dy: 3};

// Detectar input
let pointerX1 = null;
let pointerX2 = null;

canvas.addEventListener('mousemove', e => {
  if(e.clientY > canvas.height/2) pointerX1 = e.offsetX;
  else pointerX2 = e.offsetX;
});

canvas.addEventListener('touchmove', e => {
  e.preventDefault();
  for(let touch of e.touches){
    if(touch.clientY > canvas.height/2) pointerX1 = touch.clientX - canvas.getBoundingClientRect().left;
    else pointerX2 = touch.clientX - canvas.getBoundingClientRect().left;
  }
}, {passive:false});

function update() {
  // Mover jugadores
  if(pointerX1 !== null) player1.x = pointerX1 - player1.width/2;
  if(pointerX2 !== null) player2.x = pointerX2 - player2.width/2;

  // Limitar jugadores dentro del canvas
  player1.x = Math.max(0, Math.min(canvas.width - player1.width, player1.x));
  player2.x = Math.max(0, Math.min(canvas.width - player2.width, player2.x));

  // Mover pelota
  ball.x += ball.dx;
  ball.y += ball.dy;

  // Rebotes con paredes
  if(ball.x < ball.radius || ball.x > canvas.width - ball.radius) ball.dx *= -1;

  // Rebotes con jugadores
  if(ball.y + ball.radius > player1.y && ball.y - ball.radius < player1.y + player1.height &&
     ball.x > player1.x && ball.x < player1.x + player1.width) {
    ball.dy *= -1;
    ball.y = player1.y - ball.radius;
  }
  if(ball.y - ball.radius < player2.y + player2.height && ball.y + ball.radius > player2.y &&
     ball.x > player2.x && ball.x < player2.x + player2.width) {
    ball.dy *= -1;
    ball.y = player2.y + player2.height;
  }

  // Goles
  if(ball.y < 0){
    score1++;
    resetBall();
  } else if(ball.y > canvas.height){
    score2++;
    resetBall();
  }
}

function resetBall() {
  ball.x = canvas.width/2;
  ball.y = canvas.height/2;
  ball.dx = (Math.random() > 0.5 ? 3 : -3);
  ball.dy = (Math.random() > 0.5 ? 3 : -3);
  updateScore();
}

function updateScore(){
  document.getElementById('score1').textContent = score1;
  document.getElementById('score2').textContent = score2;
}

// Cronómetro
setInterval(()=>{
  timer--;
  document.getElementById('timer').textContent = timer;
  if(timer <= 0) alert(`¡Fin del juego! Resultado: ${score1} - ${score2}`);
}, 1000);

function draw() {
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // Dibujar jugadores
  ctx.fillStyle = player1.color;
  ctx.fillRect(player1.x, player1.y, player1.width, player1.height);
  ctx.fillStyle = player2.color;
  ctx.fillRect(player2.x, player2.y, player2.width, player2.height);

  // Dibujar pelota
  ctx.beginPath();
  ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI*2);
  ctx.fillStyle = ball.color;
  ctx.fill();
  ctx.closePath();

  requestAnimationFrame(draw);
}

function gameLoop(){
  update();
  requestAnimationFrame(gameLoop);
}

draw();
gameLoop();
</script>

</body>
</html>
