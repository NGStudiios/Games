<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fútbol Touch & PC</title>
<style>
body {
  margin:0;
  font-family:'Segoe UI',sans-serif;
  background:#4CAF50; /* césped */
  overflow:hidden;
}
canvas {
  display:block;
  margin:0 auto;
  background:#4CAF50;
  border:3px solid #00e5ff;
}
.scoreboard {
  text-align:center;
  color:#fff;
  font-size:1.5em;
  margin:5px 0;
  text-shadow: 0 0 5px #000;
}
</style>
</head>
<body>
<div class="scoreboard">
  Puntos: <span id="score">0</span>
</div>
<canvas id="gameCanvas" width="800" height="400"></canvas>
<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

let score = 0;
const scoreEl = document.getElementById('score');

// Jugador único
const player = {x: canvas.width/2 - 30, y: canvas.height - 80, width:60, height:60, color:'#ff4444', speed:6};

// Pelota
const ball = {x: canvas.width/2, y: canvas.height - 120, radius:15, vx:0, vy:0, color:'#fff', moving:false};

// Arco
const goal = {x: canvas.width/2 - 50, y:50, width:100, height:20, color:'#fff'};

// Controles
const keys = {};

// Función para dibujar jugador
function drawPlayer(){
  ctx.fillStyle = player.color;
  ctx.fillRect(player.x, player.y, player.width, player.height);
}

// Función para dibujar pelota
function drawBall(){
  ctx.fillStyle = ball.color;
  ctx.beginPath();
  ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI*2);
  ctx.fill();
}

// Función para dibujar arco
function drawGoal(){
  ctx.fillStyle = goal.color;
  ctx.fillRect(goal.x, goal.y, goal.width, goal.height);
}

// Movimiento jugador (PC)
function movePlayer(){
  if(keys['ArrowLeft'] && player.x>0) player.x -= player.speed;
  if(keys['ArrowRight'] && player.x + player.width < canvas.width) player.x += player.speed;
  if(keys['ArrowUp'] && player.y>canvas.height/2) player.y -= player.speed;
  if(keys['ArrowDown'] && player.y + player.height < canvas.height - player.height) player.y += player.speed;
}

// Movimiento de la pelota
function moveBall(){
  if(ball.moving){
    ball.x += ball.vx;
    ball.y += ball.vy;

    // Rebote con bordes
    if(ball.x - ball.radius <0 || ball.x + ball.radius > canvas.width){
      ball.vx = -ball.vx;
    }
    if(ball.y - ball.radius <0){
      // Si entra al arco
      if(ball.x > goal.x && ball.x < goal.x + goal.width){
        score++;
        scoreEl.innerText = score;
      }
      resetBall();
    }
    if(ball.y + ball.radius > canvas.height){
      resetBall();
    }
  } else {
    // La pelota sigue al jugador si no está en movimiento
    ball.x = player.x + player.width/2;
    ball.y = player.y - ball.radius - 5;
  }
}

// Reset pelota
function resetBall(){
  ball.moving = false;
  ball.vx = 0;
  ball.vy = 0;
  ball.x = player.x + player.width/2;
  ball.y = player.y - ball.radius -5;
}

// Disparo de pelota
function kickBall(){
  if(!ball.moving){
    ball.vx = (Math.random()*4 - 2); // dirección horizontal aleatoria
    ball.vy = -7; // velocidad hacia arriba
    ball.moving = true;
  }
}

// Touch control
let touchX = null;
let touchY = null;

canvas.addEventListener('touchstart', e=>{
  const t = e.touches[0];
  touchX = t.clientX - canvas.getBoundingClientRect().left;
  touchY = t.clientY - canvas.getBoundingClientRect().top;

  // Disparo si tocamos arriba
  if(touchY < canvas.height/2){
    kickBall();
  }
});

canvas.addEventListener('touchmove', e=>{
  const t = e.touches[0];
  const moveX = t.clientX - canvas.getBoundingClientRect().left;
  const moveY = t.clientY - canvas.getBoundingClientRect().top;

  player.x = Math.min(Math.max(moveX - player.width/2,0), canvas.width - player.width);
  player.y = Math.min(Math.max(moveY, canvas.height/2), canvas.height - player.height);
});

// Update
function update(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  ctx.fillStyle = '#4CAF50';
  ctx.fillRect(0,0,canvas.width,canvas.height);

  drawGoal();
  drawPlayer();
  drawBall();
  movePlayer();
  moveBall();

  requestAnimationFrame(update);
}

// Controles teclado
document.addEventListener('keydown', e => {
  keys[e.key] = true;
  if(e.key===' ') kickBall(); // espacio para disparar
});
document.addEventListener('keyup', e => keys[e.key] = false);

update();
</script>
</body>
</html>
