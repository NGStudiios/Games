<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Tetris Game</title>
<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />
<style>
  /* Tetris board */
  #tetris {
    display: grid;
    grid-template-columns: repeat(10, 2rem);
    grid-template-rows: repeat(20, 2rem);
    gap: 1.5px;
    background-color: #1e293b;
    border: 3px solid #334155;
    border-radius: 0.5rem;
    width: max-content;
    margin: 0 auto;
    user-select: none;
  }
  .cell {
    width: 2rem;
    height: 2rem;
    background-color: #0f172a;
    border-radius: 0.25rem;
    box-sizing: border-box;
    transition: background-color 0.2s ease;
  }

  /* Tetromino colors */
  .I { background-color: #06b6d4; box-shadow: 0 0 6px #06b6d4; }
  .J { background-color: #2563eb; box-shadow: 0 0 6px #2563eb; }
  .L { background-color: #f97316; box-shadow: 0 0 6px #f97316; }
  .O { background-color: #eab308; box-shadow: 0 0 6px #eab308; }
  .S { background-color: #22c55e; box-shadow: 0 0 6px #22c55e; }
  .T { background-color: #a855f7; box-shadow: 0 0 6px #a855f7; }
  .Z { background-color: #ef4444; box-shadow: 0 0 6px #ef4444; }

  /* Next piece */
  #next-piece, #next-piece-mobile {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    grid-template-rows: repeat(4, 1fr);
    background: #0f172a;
    border-radius: 0.5rem;
    box-shadow: inset 0 0 6px #a855f7;
    padding: 4px;
    gap: 2px;
  }
  #next-piece-mobile {
    width: 5rem;
    height: 5rem;
    padding: 2px;
    gap: 1px;
  }
  #next-piece .cell, #next-piece-mobile .cell {
    width: 100%;
    height: 100%;
    border-radius: 0.25rem;
  }

  /* Game Over Overlay */
  #game-over-overlay {
    position: fixed;
    inset: 0;
    background: rgba(15, 23, 42, 0.95);
    color: #f87171;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    font-weight: 700;
    font-size: 2.5rem;
    z-index: 1000;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s ease;
    user-select: none;
  }
  #game-over-overlay.show { opacity: 1; pointer-events: all; }
  #game-over-overlay button {
    margin-top: 1.5rem;
    background-color: #ef4444;
    color: white;
    padding: 0.75rem 2rem;
    border-radius: 0.5rem;
    font-size: 1.25rem;
    font-weight: 700;
    cursor: pointer;
    border: none;
    transition: background-color 0.2s ease;
  }
  #game-over-overlay button:hover { background-color: #dc2626; }

  /* Responsive adjustments */
  @media (max-width: 768px) {
    #tetris { grid-template-columns: repeat(10, 1.6rem); grid-template-rows: repeat(20, 1.6rem); gap: 1px; border-width: 2px; }
    .cell { width: 1.6rem; height: 1.6rem; border-radius: 0.2rem; }
    main { gap: 4; }
  }
  @media (max-width: 480px) {
    #tetris { grid-template-columns: repeat(10, 1.2rem); grid-template-rows: repeat(20, 1.2rem); gap: 0.8px; border-width: 2px; }
    .cell { width: 1.2rem; height: 1.2rem; border-radius: 0.15rem; }
    main { flex-direction: column; align-items: center; gap: 6; }
  }
</style>
</head>
<body class="bg-slate-900 text-slate-100 flex flex-col min-h-screen">

<header class="p-4 sm:p-6 text-center">
  <h1 class="text-3xl sm:text-4xl font-extrabold tracking-wide">Tetris Game</h1>
</header>

<main class="flex flex-col md:flex-row justify-center items-start gap-8 px-4 pb-12 flex-grow">

  <section>
    <div id="tetris" aria-label="Tetris game board" role="grid" tabindex="0"></div>
  </section>

  <section class="w-full max-w-xs text-center md:text-left">
    <div class="mb-6 p-3 sm:p-4 bg-slate-800 rounded-lg shadow-lg">
      <h2 class="text-xl sm:text-2xl font-semibold mb-1 sm:mb-2">Score</h2>
      <p id="score" class="text-3xl sm:text-4xl font-bold">0</p>
    </div>
    <div class="mb-6 p-3 sm:p-4 bg-slate-800 rounded-lg shadow-lg">
      <h2 class="text-xl sm:text-2xl font-semibold mb-1 sm:mb-2">Level</h2>
      <p id="level" class="text-2xl sm:text-3xl font-bold">1</p>
    </div>
    <div class="mb-6 p-3 sm:p-4 bg-slate-800 rounded-lg shadow-lg">
      <h2 class="text-xl sm:text-2xl font-semibold mb-1 sm:mb-2">Next Piece</h2>
      <div id="next-piece" aria-label="Next Tetris piece preview"></div>
    </div>

    <!-- Start / Restart button -->
    <button id="start-button" class="w-full py-3 mt-4 bg-indigo-600 hover:bg-indigo-700 active:bg-indigo-800 rounded-lg font-semibold text-lg sm:text-xl transition-colors shadow-lg">
      Start / Restart
    </button>
    <p class="mt-4 text-xs sm:text-sm text-slate-400">
      Use arrow keys to move and rotate pieces. Press spacebar to hard drop.
    </p>
  </section>

</main>

<!-- Mobile info -->
<div id="info-mobile" class="md:hidden fixed bottom-20 left-0 right-0 flex flex-col items-center gap-3 px-4">
  <button id="start-button-mobile" class="w-full max-w-xs py-3 bg-indigo-600 hover:bg-indigo-700 active:bg-indigo-800 rounded-lg font-semibold text-lg shadow-lg">
    Start / Restart
  </button>
  <div class="flex gap-2">
    <div class="bg-slate-800 p-2 rounded-lg text-center w-20">
      <h2 class="text-xs font-semibold text-slate-400">Score</h2>
      <p id="score-mobile" class="text-lg font-bold text-white">0</p>
    </div>
    <div class="bg-slate-800 p-2 rounded-lg text-center w-20">
      <h2 class="text-xs font-semibold text-slate-400">Level</h2>
      <p id="level-mobile" class="text-lg font-bold text-white">1</p>
    </div>
    <div class="bg-slate-900 p-1 rounded-lg shadow-inner">
      <div id="next-piece-mobile"></div>
    </div>
  </div>
</div>

<!-- Mobile controls -->
<nav id="mobile-controls" class="fixed bottom-0 left-0 right-0 bg-slate-800 p-3 flex justify-center gap-4 md:hidden z-50">
  <button id="btn-left" class="bg-slate-700 hover:bg-slate-600 active:bg-slate-500 rounded-lg p-3 flex items-center justify-center text-xl">
    <i class="fas fa-arrow-left"></i>
  </button>
  <button id="btn-rotate"
