<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>El Impostor - Fútbol</title>
<style>
  body{margin:0;font-family:Arial,Helvetica,sans-serif;background:#0f1724;color:#fff}
  .wrap{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:20px}
  .panel{background:#111a2a;padding:20px;border-radius:12px;box-shadow:0 0 30px rgba(0,0,0,0.6);max-width:900px;width:100%}
  h1{color:#00e5ff;text-align:center;margin:0 0 15px}
  .setup{text-align:center}
  .setup input{width:80px;padding:8px;font-size:16px;text-align:center;margin:10px}
  .btn{background:#00e5ff;border:none;color:#06121a;font-weight:bold;padding:10px 16px;border-radius:8px;cursor:pointer}
  .btn:disabled{opacity:.5;cursor:not-allowed}
  .nums{display:flex;flex-wrap:wrap;gap:10px;justify-content:center;margin:20px 0}
  .num-btn{background:#1c2537;border:none;color:#fff;padding:12px 18px;font-size:18px;border-radius:8px;cursor:pointer}
  .num-btn[disabled]{opacity:.5;cursor:not-allowed}
  .display{min-height:200px;text-align:center;margin-top:20px}
  .player-name{font-size:22px;font-weight:bold}
  .player-image{width:160px;height:160px;border-radius:10px;object-fit:cover;margin-top:12px}
  .img-placeholder{width:160px;height:160px;border-radius:10px;background:#333;display:flex;align-items:center;justify-content:center;margin:12px auto;color:#bbb;font-size:14px}
</style>
</head>
<body>
<div class="wrap">
  <div class="panel">
    <h1>El Impostor - Fútbol</h1>

    <!-- Pantalla de configuración -->
    <div id="setup" class="setup">
      <p>Elige la cantidad de jugadores (mínimo 3):</p>
      <input type="number" id="playerCount" min="3" value="5" />
      <button class="btn" id="startGame">Comenzar</button>
    </div>

    <!-- Pantalla del juego -->
    <div id="game" style="display:none">
      <div class="nums" id="buttons"></div>
      <div class="display">
        <div class="player-name" id="displayText"></div>
        <div id="imgWrap"></div>
        <p id="statusNote"></p>
      </div>
      <div style="text-align:center;margin-top:10px">
        <button class="btn" id="playAgain" style="display:none">Jugar otro</button>
      </div>
    </div>
  </div>
</div>

<script>
// Lista resumida (puedes pegar aquí la lista larga de jugadores que armamos antes)
const players = ["Pelé","DiegoMaradona","LionelMessi","CristianoRonaldo","JohanCruyff","ZinedineZidane","Ronaldinho","MichelPlatini","GeorgeBest","FranzBeckenbauer","PaoloMaldini","RobertoBaggio"];

let chosenPlayer = "";
let impostorPosition = 0;
let totalPlayers = 0;

const setupDiv = document.getElementById("setup");
const gameDiv = document.getElementById("game");
const buttonsDiv = document.getElementById("buttons");
const displayText = document.getElementById("displayText");
const imgWrap = document.getElementById("imgWrap");
const statusNote = document.getElementById("statusNote");
const playAgainBtn = document.getElementById("playAgain");

document.getElementById("startGame").addEventListener("click", ()=>{
  const count = parseInt(document.getElementById("playerCount").value,10);
  if(isNaN(count) || count<3){
    alert("Debes elegir al menos 3 jugadores.");
    return;
  }
  totalPlayers = count;
  startNewGame();
  setupDiv.style.display="none";
  gameDiv.style.display="block";
});

function startNewGame(){
  chosenPlayer = players[Math.floor(Math.random()*players.length)];
  impostorPosition = Math.floor(Math.random()*totalPlayers) + 1;

  // crear botones
  buttonsDiv.innerHTML = "";
  for(let i=1;i<=totalPlayers;i++){
    const b=document.createElement("button");
    b.textContent=i;
    b.className="num-btn";
    b.addEventListener("click",()=>revealNumber(i,b));
    buttonsDiv.appendChild(b);
  }

  displayText.textContent="";
  imgWrap.innerHTML="";
  statusNote.textContent="Toca un número para revelar.";
  playAgainBtn.style.display="none";
}

function loadPlayerImage(name,onSuccess,onFail){
  const tryExt=(ext)=>{ 
    const img=new Image(); img.className="player-image";
    img.onload=()=>onSuccess(img);
    img.onerror=()=>{ if(ext==".jpg")tryExt(".png"); else onFail();};
    img.src="Jugadores/"+name+ext;
  };
  tryExt(".jpg");
}

function showPlaceholder(text){
  const d=document.createElement("div");
  d.className="img-placeholder";
  d.textContent=text;
  return d;
}

function revealNumber(num,btn){
  btn.disabled=true;
  displayText.textContent="";
  imgWrap.innerHTML="";
  if(num===impostorPosition){
    displayText.textContent="IMPOSTOR";
    loadPlayerImage("Impostor",(img)=>imgWrap.appendChild(img),()=>imgWrap.appendChild(showPlaceholder("Impostor no encontrado")));
    statusNote.textContent=`El impostor estaba en ${num}`;
  }else{
    displayText.textContent=chosenPlayer;
    loadPlayerImage(chosenPlayer,(img)=>imgWrap.appendChild(img),()=>imgWrap.appendChild(showPlaceholder("Imagen no encontrada")));
    statusNote.textContent=`Posición ${num}: ${chosenPlayer}`;
  }

  // Si todos fueron clickeados -> fin
  const allDisabled=[...buttonsDiv.querySelectorAll("button")].every(b=>b.disabled);
  if(allDisabled) playAgainBtn.style.display="inline-block";
}

playAgainBtn.addEventListener("click",()=>{
  startNewGame();
});
</script>
</body>
</html>
