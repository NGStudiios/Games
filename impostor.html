<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>El Impostor - FÃºtbol</title>
<style>
  body{margin:0;font-family:Arial,Helvetica,sans-serif;background:#0f1724;color:#fff}
  .wrap{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:20px}
  .panel{background:#111a2a;padding:20px;border-radius:12px;box-shadow:0 0 30px rgba(0,0,0,0.6);max-width:950px;width:100%}
  h1{color:#00e5ff;text-align:center;margin:0 0 15px}
  .setup{text-align:center}
  .setup input{width:80px;padding:8px;font-size:16px;text-align:center;margin:10px}
  .btn{background:#00e5ff;border:none;color:#06121a;font-weight:bold;padding:10px 16px;border-radius:8px;cursor:pointer;margin:6px}
  .btn:disabled{opacity:.5;cursor:not-allowed}
  .nums{display:flex;flex-wrap:wrap;gap:10px;justify-content:center;margin:20px 0}
  .num-btn{background:#1c2537;border:none;color:#fff;padding:12px 18px;font-size:18px;border-radius:8px;cursor:pointer}
  .num-btn[disabled]{opacity:.5;cursor:not-allowed}
  .display{min-height:260px;text-align:center;margin-top:20px}
  .player-name{font-size:24px;font-weight:bold;margin-bottom:10px}
  .player-desc{font-size:15px;color:#ddd;max-width:600px;margin:0 auto 12px}
  .player-image{width:180px;height:180px;border-radius:10px;object-fit:cover;margin-top:12px}
  .img-placeholder{width:180px;height:180px;border-radius:10px;background:#333;display:flex;align-items:center;justify-content:center;margin:12px auto;color:#bbb;font-size:14px}
</style>
</head>
<body>
<div class="wrap">
  <div class="panel">
    <h1>El Impostor - FÃºtbol</h1>

    <!-- Pantalla de configuraciÃ³n -->
    <div id="setup" class="setup">
      <p>Elige la cantidad de jugadores (mÃ­nimo 3):</p>
      <input type="number" id="playerCount" min="3" value="5" />
      <button class="btn" id="startGame">Comenzar</button>
    </div>

    <!-- Pantalla del juego -->
    <div id="game" style="display:none">
      <div class="nums" id="buttons"></div>
      <div class="display">
        <div class="player-name" id="displayName"></div>
        <div class="player-desc" id="displayDesc"></div>
        <div id="imgWrap"></div>
        <div><button class="btn" id="readyBtn" style="display:none">Listo</button></div>
      </div>
      <div style="text-align:center;margin-top:10px">
        <button class="btn" id="showImpostors" style="display:none">Ver Impostores</button>
        <button class="btn" id="playAgain" style="display:none">Jugar otro</button>
      </div>
    </div>
  </div>
</div>

<script>
// Base de datos de jugadores
const playersData = {
  "SergioRamos": {desc:"Defensa espaÃ±ol, gran capitÃ¡n del Real Madrid y campeÃ³n mundial 2010.", img:"SergioRamos"},
  "GerardPiquÃ©": {desc:"Defensa espaÃ±ol del Barcelona, campeÃ³n mundial 2010.", img:"GerardPiquÃ©"},
  "CarlesPuyol": {desc:"Defensa espaÃ±ol, lÃ­der y corazÃ³n del Barcelona y EspaÃ±a.", img:"CarlesPuyol"},
  "DaniAlves": {desc:"Defensa brasileÃ±o, incansable, campeÃ³n mundial 2002.", img:"DaniAlves"},
  "MarceloVieira": {desc:"Lateral brasileÃ±o ofensivo, estrella del Real Madrid.", img:"MarceloVieira"},
  "ThiagoSilva": {desc:"Defensa brasileÃ±o, sÃ³lido y seguro, lÃ­der en defensa.", img:"ThiagoSilva"},
  "Marquinhos": {desc:"Defensa brasileÃ±o del PSG, versÃ¡til y rÃ¡pido.", img:"Marquinhos"},
  "DavidDeGea": {desc:"Portero espaÃ±ol, Ã¡gil y seguro, estrella del Manchester United.", img:"DavidDeGea"},
  "AlissonBecker": {desc:"Portero brasileÃ±o del Liverpool, seguro y rÃ¡pido.", img:"AlissonBecker"},
  "EdersonMoraes": {desc:"Portero brasileÃ±o, gran reflejos y juego con los pies.", img:"EdersonMoraes"},
  "LukaModriÄ‡": {desc:"Mediocampista croata, elegante y tÃ¡ctico, BalÃ³n de Oro 2018.", img:"LukaModriÄ‡"},
  "ToniKroos": {desc:"Mediocampista alemÃ¡n, preciso y lÃ­der en el Real Madrid.", img:"ToniKroos"},
  "KevinDeBruyne": {desc:"Mediocampista belga, creativo y goleador, estrella del City.", img:"KevinDeBruyne"},
  "Nâ€™GoloKantÃ©": {desc:"Mediocampista francÃ©s incansable, campeÃ³n mundial 2018.", img:"Nâ€™GoloKantÃ©"},
  "PaulPogba": {desc:"Mediocampista francÃ©s, poderoso y creativo.", img:"PaulPogba"},
  "BrunoFernandes": {desc:"Mediocampista portuguÃ©s del Manchester United, creativo y goleador.", img:"BrunoFernandes"},
  "JoshuaKimmich": {desc:"Mediocampista alemÃ¡n versÃ¡til y tÃ¡ctico del Bayern.", img:"JoshuaKimmich"},
  "LeonGoretzka": {desc:"Mediocampista alemÃ¡n potente, destacado en el Bayern.", img:"LeonGoretzka"},
  "FrenkieDeJong": {desc:"Mediocampista holandÃ©s, creativo y moderno del Barcelona.", img:"FrenkieDeJong"},
  "MatthijsDeLigt": {desc:"Defensa holandÃ©s, sÃ³lido y joven, estrella de la Juventus.", img:"MatthijsDeLigt"},
  "VirgilVanDijk": {desc:"Defensa holandÃ©s del Liverpool, fuerte y seguro.", img:"VirgilVanDijk"},
  "ErlingHaaland": {desc:"Delantero noruego goleador, estrella del Manchester City.", img:"ErlingHaaland"},
  "RobertLewandowski": {desc:"Delantero polaco goleador, figura del Barcelona y Bayern.", img:"RobertLewandowski"},
  "KarimBenzema": {desc:"Delantero francÃ©s, elegante y goleador, BalÃ³n de Oro 2022.", img:"KarimBenzema"},
  "HarryKane": {desc:"Delantero inglÃ©s, goleador nato y lÃ­der del Tottenham.", img:"HarryKane"},
  "RaheemSterling": {desc:"Delantero inglÃ©s rÃ¡pido y habilidoso.", img:"RaheemSterling"},
  "SonHeung-min": {desc:"Delantero surcoreano, estrella del Tottenham, rÃ¡pido y preciso.", img:"SonHeung-min"},
  "JadonSancho": {desc:"Extremo inglÃ©s joven y habilidoso, figura del Manchester United.", img:"JadonSancho"},
  "MarcusRashford": {desc:"Delantero inglÃ©s, rÃ¡pido y habilidoso, estrella del Manchester United.", img:"MarcusRashford"},
  "VinÃ­ciusJÃºnior": {desc:"Delantero brasileÃ±o joven del Real Madrid, habilidoso y rÃ¡pido.", img:"VinÃ­ciusJÃºnior"},
  "RodrygoGoes": {desc:"Delantero brasileÃ±o del Real Madrid, joven y prometedor.", img:"RodrygoGoes"},
  "Casemiro": {desc:"Mediocampista brasileÃ±o del Real Madrid, sÃ³lido y estratÃ©gico.", img:"Casemiro"},
  "EdinsonCavani": {desc:"Delantero uruguayo, potente y goleador, Ã­dolo en PSG y Manchester.", img:"EdinsonCavani"},
  "GabrielJesus": {desc:"Delantero brasileÃ±o joven, habilidoso y veloz.", img:"GabrielJesus"},
  "PhilippeCoutinho": {desc:"Mediocampista brasileÃ±o creativo y habilidoso.", img:"PhilippeCoutinho"},
  "BernardoSilva": {desc:"Mediocampista portuguÃ©s, tÃ©cnico y veloz, estrella del City.", img:"BernardoSilva"},
  "JoÃ£oFÃ©lix": {desc:"Delantero portuguÃ©s joven, habilidoso, promesa del AtlÃ©tico de Madrid.", img:"JoÃ£oFÃ©lix"},
  "AntoineGriezmann": {desc:"Delantero francÃ©s, creativo y goleador, campeÃ³n mundial 2018.", img:"AntoineGriezmann"},
  "OlivierGiroud": {desc:"Delantero francÃ©s, fuerte y goleador, campeÃ³n mundial 2018.", img:"OlivierGiroud"},
  "EdenHazard": {desc:"Delantero belga habilidoso, estrella del Real Madrid.", img:"EdenHazard"},
  "ThomasMÃ¼ller": {desc:"Delantero alemÃ¡n versÃ¡til, goleador y asistidor del Bayern.", img:"ThomasMÃ¼ller"},
  "LeroySanÃ©": {desc:"Extremo alemÃ¡n rÃ¡pido y habilidoso del Bayern.", img:"LeroySanÃ©"},
  "KaiHavertz": {desc:"Mediocampista alemÃ¡n joven, creativo y tÃ©cnico.", img:"KaiHavertz"},
  "TimoWerner": {desc:"Delantero alemÃ¡n rÃ¡pido y habilidoso, juega en Chelsea.", img:"TimoWerner"},
  "AntonioRÃ¼diger": {desc:"Defensa alemÃ¡n fuerte, seguro y rÃ¡pido.", img:"AntonioRÃ¼diger"},
  "HarryMaguire": {desc:"Defensa inglÃ©s, sÃ³lido y capitÃ¡n del Manchester United.", img:"HarryMaguire"},
  "MasonMount": {desc:"Mediocampista inglÃ©s, creativo y joven del Chelsea.", img:"MasonMount"},
  "PhilFoden": {desc:"Mediocampista inglÃ©s joven, habilidoso y creativo.", img:"PhilFoden"},
  "JackGrealish": {desc:"Mediocampista inglÃ©s, habilidoso y creativo del Manchester City.", img:"JackGrealish"},
  "RodriHernÃ¡ndez": {desc:"Mediocampista espaÃ±ol, tÃ¡ctico y seguro del City.", img:"RodriHernÃ¡ndez"},
  "EduardoCamavinga": {desc:"Mediocampista francÃ©s joven, veloz y creativo.", img:"EduardoCamavinga"},
  "JudeBellingham": {desc:"Mediocampista inglÃ©s joven y talentoso, lÃ­der emergente.", img:"JudeBellingham"},
  "Pedri": {desc:"Mediocampista espaÃ±ol joven del Barcelona, creativo y talentoso.", img:"Pedri"},
  "Gavi": {desc:"Mediocampista espaÃ±ol, joven y dinÃ¡mico del Barcelona.", img:"Gavi"},
  "AnsuFati": {desc:"Delantero espaÃ±ol joven del Barcelona, rÃ¡pido y habilidoso.", img:"AnsuFati"},
  "Raphinha": {desc:"Delantero brasileÃ±o habilidoso, veloz y tÃ©cnico.", img:"Raphinha"},
  "Richarlison": {desc:"Delantero brasileÃ±o potente, rÃ¡pido y goleador.", img:"Richarlison"},
  "LautaroMartÃ­nez": {desc:"Delantero argentino, goleador y joven estrella del Inter.", img:"LautaroMartÃ­nez"},
  "PauloDybala": {desc:"Delantero argentino habilidoso, creativo y goleador.", img:"PauloDybala"},
  "JamesRodrÃ­guez": {desc:"Mediocampista colombiano, creativo y goleador.", img:"JamesRodrÃ­guez"},
  "RomeluLukaku": {desc:"Delantero belga potente, goleador y lÃ­der del Chelsea.", img:"RomeluLukaku"}
};

let chosenPlayer = "";
let impostorPositions = new Set();
let totalPlayers = 0;

const setupDiv = document.getElementById("setup");
const gameDiv = document.getElementById("game");
const buttonsDiv = document.getElementById("buttons");
const displayName = document.getElementById("displayName");
const displayDesc = document.getElementById("displayDesc");
const imgWrap = document.getElementById("imgWrap");
const readyBtn = document.getElementById("readyBtn");
const playAgainBtn = document.getElementById("playAgain");
const showImpostorsBtn = document.getElementById("showImpostors");

document.getElementById("startGame").addEventListener("click", ()=>{
  const count = parseInt(document.getElementById("playerCount").value,10);
  if(isNaN(count) || count<3){
    alert("Debes elegir al menos 3 jugadores.");
    return;
  }
  totalPlayers = count;
  startNewGame();
  setupDiv.style.display="none";
  gameDiv.style.display="block";
});

function startNewGame(){
  const keys = Object.keys(playersData);
  chosenPlayer = keys[Math.floor(Math.random()*keys.length)];
  impostorPositions.clear();

  const roll = Math.random();
  if(roll < 0.80){
    impostorPositions.add(Math.floor(Math.random() * totalPlayers) + 1);
  } else {
    const subRoll = Math.random();
    if(subRoll < 0.33){
      impostorPositions = new Set();
    } else if(subRoll < 0.66){
      while(impostorPositions.size < 2){
        impostorPositions.add(Math.floor(Math.random() * totalPlayers) + 1);
      }
    } else {
      const impostorCount = Math.floor(Math.random() * (totalPlayers - 2)) + 3;
      while(impostorPositions.size < impostorCount){
        impostorPositions.add(Math.floor(Math.random() * totalPlayers) + 1);
      }
    }
  }

  buttonsDiv.innerHTML = "";
  for(let i=1;i<=totalPlayers;i++){
    const b=document.createElement("button");
    b.textContent=i;
    b.className="num-btn";
    b.addEventListener("click",()=>revealNumber(i,b));
    buttonsDiv.appendChild(b);
  }

  displayName.textContent="";
  displayDesc.textContent="";
  imgWrap.innerHTML="";
  readyBtn.style.display="none";
  playAgainBtn.style.display="none";
  showImpostorsBtn.style.display="none";
}

function loadPlayerImage(name,onSuccess,onFail){
  const tryExt=(ext)=>{ 
    const img=new Image(); img.className="player-image";
    img.onload=()=>onSuccess(img);
    img.onerror=()=>{ if(ext==".jpg")tryExt(".png"); else onFail();};
    img.src="Jugadores/"+name+ext;
  };
  tryExt(".jpg");
}

function showPlaceholder(text){
  const d=document.createElement("div");
  d.className="img-placeholder";
  d.textContent=text;
  return d;
}

function revealNumber(num,btn){
  btn.disabled=true;
  displayName.textContent="";
  displayDesc.textContent="";
  imgWrap.innerHTML="";

  if(impostorPositions.has(num)){
    displayName.textContent="IMPOSTOR";
    displayDesc.textContent="Mantente en secreto... Â¡EngaÃ±a a todos!";
    loadPlayerImage("Impostor",(img)=>imgWrap.appendChild(img),()=>imgWrap.appendChild(showPlaceholder("Impostor no encontrado")));
  }else{
    const data=playersData[chosenPlayer];
    displayName.textContent=chosenPlayer;
    displayDesc.textContent=data.desc;
    loadPlayerImage(data.img,(img)=>imgWrap.appendChild(img),()=>imgWrap.appendChild(showPlaceholder("Imagen no encontrada")));
  }

  readyBtn.style.display="inline-block";

  readyBtn.onclick=()=>{
    displayName.textContent="";
    displayDesc.textContent="";
    imgWrap.innerHTML="";
    readyBtn.style.display="none";

    const allDisabled=[...buttonsDiv.querySelectorAll("button")].every(b=>b.disabled);
    if(allDisabled){
      showImpostorsBtn.style.display="inline-block";
      playAgainBtn.style.display="inline-block";
    }
  };
}

showImpostorsBtn.addEventListener("click",()=>{
  displayName.textContent="Los impostores eran:";
  displayDesc.textContent="";
  imgWrap.innerHTML="";

  impostorPositions.forEach(num=>{
    const p=document.createElement("div");
    p.textContent="Jugador "+num+" (Impostor)";
    imgWrap.appendChild(p);
  });

  // ðŸ‘‰ AdemÃ¡s mostramos al jugador elegido de la partida
  const data=playersData[chosenPlayer];
  const info=document.createElement("div");
  info.style.marginTop="15px";
  info.innerHTML="<strong>El jugador real era:</strong> "+chosenPlayer;
  imgWrap.appendChild(info);

  loadPlayerImage(data.img,(img)=>imgWrap.appendChild(img),()=>imgWrap.appendChild(showPlaceholder("Imagen no encontrada")));
});

playAgainBtn.addEventListener("click",()=>{ startNewGame(); });
</script>
</body>
</html>
