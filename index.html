<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Juego de Impostores</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f2f2f2; text-align: center; }
    h1 { margin: 20px; }
    .config, .game, .post-game { margin: 20px auto; padding: 20px; background: white; border-radius: 8px; width: 80%; max-width: 700px; }
    .hidden { display: none; }
    .players-grid { display: flex; flex-wrap: wrap; justify-content: center; margin-top: 20px; }
    .player-card { width: 150px; margin: 10px; padding: 10px; border: 1px solid #ccc; border-radius: 6px; background: #fafafa; }
    .player-card img { width: 100%; border-radius: 6px; }
    .buttons { margin: 15px; }
    button { margin: 5px; padding: 10px 15px; font-size: 14px; cursor: pointer; }
  </style>
</head>
<body>

  <h1>Juego de Impostores ⚽</h1>

  <!-- CONFIGURACIÓN -->
  <div id="config-section" class="config">
    <h2>Configuración de la Partida</h2>
    <label>Cantidad de jugadores:
      <input type="number" id="numPlayers" min="2" max="20" value="4">
    </label>
    <br><br>

    <label>
      <input type="radio" name="impostorMode" value="manual" checked>
      Elegir cantidad de impostores
    </label>
    <input type="number" id="numImpostors" min="0" value="1">

    <br>
    <label>
      <input type="radio" name="impostorMode" value="random">
      Aleatorio
    </label>

    <br><br>
    <button onclick="startGame()">Jugar</button>
  </div>

  <!-- PARTIDA -->
  <div id="game-section" class="game hidden">
    <h2>Jugadores</h2>
    <div id="playersContainer" class="players-grid"></div>
    <div class="buttons">
      <button onclick="endGame()">Terminar Ronda</button>
      <button onclick="skipRound()">Saltar</button>
    </div>
  </div>

  <!-- POST GAME -->
  <div id="post-game-section" class="post-game hidden">
    <h2>¿Qué quieres hacer?</h2>
    <button onclick="continueSame()">Continuar con las mismas configuraciones</button>
    <button onclick="changeConfig()">Cambiar configuraciones</button>
  </div>

  <script>
    const playersData = {
      "Pelé": {
        desc: "1. Nacionalidad: Brasileño<br>\
2. Equipo Actual: Retirado<br>\
3. Todos Sus Equipos: Santos, New York Cosmos<br>\
4. Características: Delantero goleador, técnica depurada, velocidad, gran visión de juego<br>\
5. Títulos (Algunos): Copa del Mundo 1958/62/70, Copa Libertadores, Balón de Oro honorífico",
        img: "Pelé.jpg",
        category: "leyendas"
      },
      "DiegoMaradona": {
        desc: "1. Nacionalidad: Argentino<br>\
2. Equipo Actual: Retirado<br>\
3. Todos Sus Equipos: Argentinos Juniors, Boca Juniors, Barcelona, Napoli, Sevilla<br>\
4. Características: Gran regate, visión de juego, liderazgo, tiros libres precisos<br>\
5. Títulos (Algunos): Copa del Mundo 1986, Serie A, Copa UEFA, Balón de Oro honorífico",
        img: "DiegoMaradona.jpg",
        category: "leyendas"
      },
      "LionelMessi": {
        desc: "1. Nacionalidad: Argentino<br>\
2. Equipo Actual: Inter Miami<br>\
3. Todos Sus Equipos: Barcelona, PSG, Inter Miami<br>\
4. Características: Delantero / Extremo derecho o falso 9, regate excepcional, visión de juego, gran capacidad de pase y definición, liderazgo en cancha, precisión en tiros libres<br>\
5. Títulos (Algunos): Copa del Mundo 2022, Copa América 2021, UEFA Champions League 2006/09/11/15, LaLiga 10 títulos, Balón de Oro 7 veces",
        img: "LionelMessi.jpg",
        category: "actuales"
      },
      "CristianoRonaldo": {
        desc: "1. Nacionalidad: Portugués<br>\
2. Equipo Actual: Al Nassr<br>\
3. Todos Sus Equipos: Sporting CP, Manchester United, Real Madrid, Juventus, Al Nassr<br>\
4. Características: Delantero potente, velocidad, gran remate con ambos pies, liderazgo y disciplina<br>\
5. Títulos (Algunos): UEFA Champions League 2008/14/16/17/18, Eurocopa 2016, Liga de España, Serie A, Premier League",
        img: "CristianoRonaldo.jpg",
        category: "actuales"
      }
    };

    let config = {};

    // Habilitar/deshabilitar input de impostores
    document.querySelectorAll("input[name='impostorMode']").forEach(radio => {
      radio.addEventListener("change", () => {
        const mode = document.querySelector("input[name='impostorMode']:checked").value;
        document.getElementById("numImpostors").disabled = (mode === "random");
      });
    });

    function startGame() {
      const numPlayers = parseInt(document.getElementById("numPlayers").value);
      const mode = document.querySelector("input[name='impostorMode']:checked").value;
      let impostors;

      if (mode === "manual") {
        impostors = parseInt(document.getElementById("numImpostors").value);
        if (impostors > numPlayers) impostors = numPlayers;
      } else {
        // Aleatorio con probabilidad uniforme
        impostors = Math.floor(Math.random() * (numPlayers + 1));
      }

      config = { numPlayers, impostors, mode };

      document.getElementById("config-section").classList.add("hidden");
      document.getElementById("game-section").classList.remove("hidden");

      renderPlayers(numPlayers);
      alert(`Hay ${impostors} impostores en esta partida`);
    }

    function renderPlayers(numPlayers) {
      const container = document.getElementById("playersContainer");
      container.innerHTML = "";

      const names = Object.keys(playersData);
      for (let i = 0; i < numPlayers; i++) {
        const name = names[i % names.length]; // reutiliza si faltan jugadores
        const player = playersData[name];
        const card = document.createElement("div");
        card.className = "player-card";
        card.innerHTML = `
          <img src="img/${player.img}" alt="${name}">
          <h4>${name}</h4>
          <p><b>Categoría:</b> ${player.category}</p>
          <p>${player.desc}</p>
        `;
        container.appendChild(card);
      }
    }

    function endGame() {
      document.getElementById("game-section").classList.add("hidden");
      document.getElementById("post-game-section").classList.remove("hidden");
    }

    function skipRound() {
      endGame(); // funciona igual que terminar
    }

    function continueSame() {
      document.getElementById("post-game-section").classList.add("hidden");
      document.getElementById("game-section").classList.remove("hidden");
      renderPlayers(config.numPlayers);
      alert(`Nueva partida con ${config.impostors} impostores (configuración anterior)`);
    }

    function changeConfig() {
      document.getElementById("post-game-section").classList.add("hidden");
      document.getElementById("config-section").classList.remove("hidden");
    }
  </script>
</body>
</html>
